# ➲ let 和 const

## 1. let

ES6 通过 `let` 关键字声明变量

let 关键字定义的变量不存在变量名的提升

```js
console.log(x);//ReferenceError: Cannot access 'x' before initialization
let x = 10;
```

let 定义的变量在相同作用域内不可重复

```js
let x = 10;
let x = 10;//SyntaxError: Identifier 'x' has already been declared
```

let 形成块级作用域

```js
let x = 10;
{
  console.log(x);//ReferenceError: Cannot access 'x' before initialization
  let x = 10;
}
```

## 2. const

ES6 通过 `const` 关键字声明常量，常量一旦声明，不可修改。

```js
const x = 10;
x = 20;//TypeError: Assignment to constant variable.
```

> 提示：默认使用 const，只有当确实需要改变变量的值的时候才使用 let。

# ➲ 变量解构

ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构。

## 1. 解构示例

**➦ 解构数组**

```js
let [id, name, skill] = [1, "李白", "青莲剑客"];
console.log(id, name, skill); 
// 1 李白 青莲剑客
```

**➦ 解构对象**

```js
let {name, address, tel} = {
    name: "木子李",
    address: "成都市高新区雅和南四路216号",
    tel: "15228885771"
};
console.log(name, address, tel);
// 木子李 成都市高新区雅和南四路216号 15228885771
```

**➦ 设置默认值**：

```js
let {name = "李鸿耀", address, tel} = {
    address: "成都市高新区雅和南四路216号",
    tel: "15228885771"
};
console.log(name, address, tel);
// 李鸿耀 成都市高新区雅和南四路216号 15228885771
```

**➦ 解构字符串**

```javascript
let [a,b,c,d,e] = "CHINA";
console.log(a, b, c, d, e);
// C H I N A
```

## 2. 用途

**➦ 交换值**

```javascript
let x = 10, y = 20;
[x, y] = [y, x];
console.log(x, y);
// 20 10
```

**➦ 函数返回值**

```js
function conditions() {
    let min = 18, max = 50;
    return {min, max};
}
console.log(conditions());
// { min: 18, max: 50 }
```

**➦ 函数参数**

```javascript
function sum([a, b]) {
    return a + b;
}
console.log(sum([1, 2])); // 3
```

**➦ 提取JSON数据**

解构赋值对提取JSON对象中的数据，尤其有用。

```javascript
let json = {
    "status": "200",
    "data": {
        username: "lihy",
        nikename: "木子李",
        origin: "四川省成都市"
    }
}
let {status, data} = json;
console.log(status,data);
// 200 { username: 'lihy', nikename: '木子李', origin: '四川省成都市' }
```

# ➲ 字符串

## 1. 模板字符串

模板字符串是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。

```javascript
// 1、普通字符串
const str1 = `Hello, world!`;
// 2、字符串中嵌入变量
const str2 = `Admin`;
const str3 = `Hello, ${name}!`;
```

> 提示：
>
> 1、模板字符串中嵌入变量使用 `${}`，`${}` 中可以是变量或表达式。
>
> 2、如果使用模板字符串表示多行字符串，所有的空格、缩进和换行都会保留在输出之中。

在模板字符串中，还可以嵌套函数，如下所示：

```javascript
let getName = () => `Henrry Lee`;
let str = `Hello, ${ getName() }!`;
console.log(str); // Hello, Henrry Lee!
```

## 2. 新增API

- [String.prototype.includes()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/includes)
- [String.prototype.startsWith()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith)
- [String.prototype.endsWith()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith)
- [String.prototype.repeat()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/repeat)
- [String.prototype.padStart()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)
- [String.prototype.padEnd()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd)

# ➲ 数值类型

## 1. 新增API

- [Number.parseInt()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/parseint)
- [Number.parseFloat()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/parseFloat)

- [Number.isNaN()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN)
- [Number.isInteger()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger)

## 2. 指数运算

```js
2 ** 2 // 4  相当于 Math.pow(2, 2);
2 ** 3 // 8  相当于 Math.pow(2, 3);
```

# ➲ Math

- [Math.trunc()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc)：去除小数部分，返回整数部分
- [Math.sign()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/sign)：判断一个数是正数、负数还是零。

# ➲ Functions

## 1. 箭头函数

ES6允许使用箭头（`=>`）定义函数，其语法形式为：

```javascript
let function_name = (arguments) => { body }
```

示例代码：

```javascript
let sum = (a, b) => { return a + b; }  
// 等价于
function sum(a, b) { return a + b; }
```

提示：

如果只有1个参数，可以省略参数圆括号。

```js
let fn = res => {console.log(res);}
```

如果函数体只有一行return语句，可以省略函数体花括号和return关键字。

```
let sum = (a, b) => a + b;
```

> 注意：
>
> 1、箭头函数定义在哪个对象上，`this` 关键字就指向哪个对象。
>
> 2、不可以当作构造函数，也就是说，不可以使用`new`命令，否则会抛出一个错误。
>
> 3、不可以使用`arguments`对象，该对象在函数体内不存在。如果要用，可以用Rest参数代替。

**箭头函数不适用场景** *

由于箭头函数使得 `this` 从“动态”变成“静态”，下面两个场合不应该使用箭头函数。

\> 第一个场合是定义函数的方法，且该方法内部包括`this`。

```javascript
const cat = {
  lives: 9,
  jumps: () => {
    this.lives--;
  }
}
```

上面代码中，`cat.jumps()`方法是一个箭头函数，这是错误的。调用`cat.jumps()`时，如果是普通函数，该方法内部的`this`指向`cat`；如果写成上面那样的箭头函数，使得`this`指向全局对象，因此不会得到预期结果。

\> 第二个场合是需要动态`this`的时候，也不应使用箭头函数。

```javascript
var button = document.getElementById('press');
button.addEventListener('click', () => {
  this.classList.toggle('on');
});
```

上面代码运行时，点击按钮会报错，因为`button`的监听函数是一个箭头函数，导致里面的`this`就是全局对象。如果改成普通函数，`this` 就会动态指向被点击的按钮对象。

另外，如果函数体很复杂，有许多行，或者函数内部有大量的读写操作，不单纯是为了计算值，这时也不应该使用箭头函数，而是要使用普通函数，这样可以提高代码可读性。

## 2. 默认值

```javascript
function sum(a = 0, b = 0) {
    return a + b;
}
console.log(sum()); // 0 
console.log(sum(10, 5)); // 15
```

> 提示：只能给函数尾参设置默认值，如果设置默认值的参数不是尾参，那么也要使用对位传参的形式给其他参数设置“undefined”；

## 3. rest 参数

ES6 引入 rest 参数（形式为`...变量名`），用于获取函数的多余参数，这样就不需要使用`arguments`对象了。rest 参数搭配的变量是一个数组，该变量将多余的参数放入数组中。

```javascript
function sum(...nums) {
    console.log(nums);
}
sum(1, 2, 3, 4); // [1, 2, 3, 4] -> Array
```

## 4. 扩展运算符

扩展运算符是三个点（`...`）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。下面示例是一些使用示例：

```js
// 1. 序列化数组
console.log(...[1, 2, 3]); // 1 2 3

// 2. 合并对象
let o1 = {name: "木子李", major: "Web前端"};
let o2 = {...o1, address: "成都市高新区"};
console.log(o2); // {name: "木子李", major: "Web前端", address: "成都市高新区"}

// 3. 合并数组
let nums1 = [1, 2], nums2 = [3, 4];
console.log([...nums1, ...nums2]); // [1, 2, 3, 4]
 
// 4. 字符串
console.log(..."CHINA"); // C H I N A

// 5. 将类似数组转为数组对象
let els = [...document.querySelectorAll(".list li")];

// 6. 复制数组
let arr = [1, 2, 3];
let newArr = [...arr]; 
console.log(newArr); // [1, 2, 3];
```

# ➲ 数组

## 1. 静态方法

- [Array.from()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from)：将类似数组转变为真正的数组；
- [Array.of()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/of)：将一组值，转换为数组

## 2. 实例方法

- [Array.prototype.copyWithin()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin)：将数组内的某组元素复制替换到指定位置。
- [Array.prototype.find()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/find)：返回数组中满足提供的测试函数的第一个元素的值。
- [Array.prototype.findIndex()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)：返回数组中满足提供的测试函数的第一个元素的**索引**。若没有找到对应元素则返回-1。
- [Array.prototype.includes()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)：判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 true，否则返回false。
- [Array.prototype.entries()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/entries)：返回一个新的**Array Iterator**对象，该对象包含数组中每个索引的键/值对。
- [Array.prototype.keys()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/keys)：返回一个包含数组中每个索引键的**Array Iterator**对象。
- [Array.prototype.values()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/values)：返回一个新的 **`Array Iterator`** 对象，该对象包含数组每个索引的值
- [Array.prototype.fill()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)：该方法使用给定值，填充一个数组。
- [Array.prototype.every()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every)：测试一个数组内的**所有元素**是否都能通过某个指定函数的测试。它返回一个布尔值。
- [Array.prototype.some()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some)：测试数组中是不是**至少有1个**元素通过了被提供的函数测试。它返回的是一个Boolean类型的值。
- [Array.prototype.flat()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)：按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。
- [Array.prototype.map()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map)：创建一个新数组，其结果是该数组中的每个元素是调用一次提供的函数后的返回值。
- [Array.prototype.filter()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)：过滤数组元素
- [Array.prototype.reduce()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)：对数组中的每个元素执行一个由您提供的**reducer**函数(升序执行)，将其结果汇总为单个返回值。

